# Default values for manager

replicaCount: 1

image:
  repository: ghcr.io/bluedotiya/web_crawler/manager
  tag: microservice
  pullPolicy: IfNotPresent

# Resource limits and requests
resources:
  requests:
    memory: "256Mi"
    cpu: "100m"
  limits:
    memory: "512Mi"
    cpu: "500m"

# Pod-level security context
podSecurityContext:
  runAsNonRoot: false  # Flask runs on port 80, needs root or change port
  runAsUser: 0
  fsGroup: 0

# Container-level security context
containerSecurityContext:
  capabilities:
    drop:
      - ALL
    add:
      - NET_BIND_SERVICE

# Service configuration
service:
  type: NodePort
  port: 80
  nodePort: 30080
  targetPort: 80

# Health checks
livenessProbe:
  enabled: true
  httpGet:
    path: /
    port: 80
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  enabled: true
  httpGet:
    path: /
    port: 80
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

# Environment variables (will be overridden by parent values)
env:
  NEO4J_DNS_NAME: "crawler-neo4j-lb-neo4j.web-crawler.svc.cluster.local:7687"
  NEO4J_USERNAME: "neo4j"
  NEO4J_PASSWORD: "password"

# Pod annotations
podAnnotations: {}

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity rules
affinity: {}
