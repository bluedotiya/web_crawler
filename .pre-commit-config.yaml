repos:
  - repo: https://github.com/AndrejOrsula/pre-commit-cargo
    rev: 0.5.0
    hooks:
      - id: cargo-check
        args: ["--workspace"]
      - id: cargo-clippy
        args: ["--workspace", "--", "-D", "warnings"]
      - id: cargo-test
        args: ["--workspace"]

  - repo: local
    hooks:
      - id: integration-test
        name: integration test (build + deploy + verify)
        entry: ./dev.sh
        language: script
        files: ^(shared|feeder|manager)/
        pass_filenames: false

      - id: frontend-lint
        name: frontend lint & type-check
        entry: bash -c 'cd frontend && npm run lint && npm run type-check'
        language: system
        files: ^frontend/
        pass_filenames: false
